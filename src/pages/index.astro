---
import Layout from '../layouts/Layout.astro';
import ProjectModal from '../components/ProjectModal.astro';
import portfolioProjects from '../data/portfolio-projects.json';
---

<Layout title="Genesis Tyndall" theme="portfolio">
	<!-- Add Pageclip stylesheet to head -->
	<link rel="stylesheet" href="https://s.pageclip.co/v1/pageclip.css" media="screen">
	
	<!-- Hero Section -->
	<section id="home" class="min-h-screen flex items-center justify-center">
		<div class="container mx-auto px-4 py-16">
			<div class="text-center">
				<div class="mb-8">
					<img 
						src="/images/portfolio/headshot/GenHeadshot.jpg" 
						alt="Genesis Tyndall" 
						class="w-48 h-48 rounded-full object-cover mx-auto border-4 border-[#91B77F] dark:border-[#A1C28F]"
					/>
				</div>
				<h1 class="text-4xl md:text-6xl font-bold text-[#1F1F1F] dark:text-[#EDEDE6] mb-6">
					Genesis Tyndall
				</h1>
				<p class="text-xl text-[#4C4C4C] dark:text-[#B0B0A8] mb-8">
					Software Engineer specializing in embedded systems, test automation, and systems integration
				</p>
				<div class="flex justify-center gap-4">
					<a href="#projects" class="w-40 px-6 py-3 bg-[#91B77F] dark:bg-[#A1C28F] text-[#1F1F1F] rounded-lg hover:bg-[#7DA867] dark:hover:bg-[#8CAF78] transition-colors">
						View Projects
					</a>
					<a href="#contact" class="w-40 px-6 py-3 border border-[#4C4C4C] dark:border-[#B0B0A8] rounded-lg hover:bg-[#91B77F]/10 dark:hover:bg-[#A1C28F]/10 transition-colors text-[#1F1F1F] dark:text-[#EDEDE6]">
						Contact Me
					</a>
					<a href="/Genesis-Tyndall-Web-Resume.pdf" target="_blank" rel="noopener noreferrer" class="w-40 px-6 py-3 border border-[#4C4C4C] dark:border-[#B0B0A8] rounded-lg hover:bg-[#91B77F]/10 dark:hover:bg-[#A1C28F]/10 transition-colors text-[#1F1F1F] dark:text-[#EDEDE6]">
						Resume
					</a>
				</div>
				<!-- Social Links -->
				<div class="flex justify-center gap-4 mt-6">
					<a 
						href="https://www.linkedin.com/in/gentyn/" 
						target="_blank" 
						rel="noopener noreferrer"
						class="p-3 border border-[#4C4C4C] dark:border-[#B0B0A8] rounded-lg hover:bg-[#91B77F]/10 dark:hover:bg-[#A1C28F]/10 transition-colors text-[#1F1F1F] dark:text-[#EDEDE6]"
						aria-label="LinkedIn Profile"
					>
						<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
							<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
						</svg>
					</a>
					<a 
						href="https://github.com/gentyn" 
						target="_blank" 
						rel="noopener noreferrer"
						class="p-3 border border-[#4C4C4C] dark:border-[#B0B0A8] rounded-lg hover:bg-[#91B77F]/10 dark:hover:bg-[#A1C28F]/10 transition-colors text-[#1F1F1F] dark:text-[#EDEDE6]"
						aria-label="GitHub Profile"
					>
						<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
							<path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Projects Section -->
	<section id="projects" class="py-20">
		<div class="container mx-auto px-4">
			<h2 class="text-4xl font-bold text-[#1F1F1F] dark:text-[#EDEDE6] mb-8">Featured Projects</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{portfolioProjects.map((project) => (
					<div 
						class="project-card bg-[#F0F0E8] dark:bg-[#262926] rounded-lg overflow-hidden shadow-lg transition-shadow cursor-pointer relative" 
						data-project-id={project.id}
					>
						<div class="card-image-loading-skeleton absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse"></div>
						<img 
							src={typeof project.images[0] === 'string' ? project.images[0] : project.images[0].src} 
							alt={typeof project.images[0] === 'string' ? project.title : project.images[0].alt} 
							class="w-full h-64 object-cover relative z-10"
							loading="lazy"
							onload="this.previousElementSibling.classList.add('hidden')"
							onerror="this.previousElementSibling.classList.add('hidden')"
						/>
						<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent p-4 z-20">
							<div class="bg-black/60 rounded-lg p-3 backdrop-blur-sm">
								<h3 class="text-xl font-semibold text-white">{project.title}</h3>
							</div>
						</div>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Project Modals -->
	{portfolioProjects.map((project) => (
		<ProjectModal
			projectId={project.id}
			title={project.title}
			description={project.description}
			technologies={project.technologies}
			images={project.images.map(img => typeof img === 'string' ? img : img.src)}
			contentBlocks={project.contentBlocks}
		/>
	))}

	<!-- About Section -->
	<section id="about" class="py-20">
		<div class="container mx-auto px-4">
			<h2 class="text-4xl font-bold text-[#1F1F1F] dark:text-[#EDEDE6] mb-8">About Me</h2>
			<div class="prose dark:prose-invert max-w-none">
				<p class="text-lg text-[#4C4C4C] dark:text-[#B0B0A8] mb-6">
					I'm a versatile software engineer with a strong background in avionics, systems integration, and test automation. At Boeing Commercial Airplanes, I managed 1,250+ system requirements for 777X and 787 aircraft, created automated test scripts, and led frontend development for internal tools.
				</p>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
					<div>
						<h3 class="text-xl font-semibold text-[#1F1F1F] dark:text-[#EDEDE6] mb-4">Technical Skills</h3>
						<ul class="list-disc list-inside text-[#4C4C4C] dark:text-[#B0B0A8] space-y-2">
							<li>Languages: Python, C, Java, JavaScript, VHDL, Bash</li>
							<li>Web: HTML, CSS, Django, Frontend Development</li>
							<li>Tools: Git, Jira, IBM DOORS, RQM, Wireshark</li>
							<li>Systems: Unix/Linux, Embedded Systems, Test Automation</li>
						</ul>
					</div>
					<div>
						<h3 class="text-xl font-semibold text-[#1F1F1F] dark:text-[#EDEDE6] mb-4">Areas of Expertise</h3>
						<ul class="list-disc list-inside text-[#4C4C4C] dark:text-[#B0B0A8] space-y-2">
							<li>Software Development Lifecycle</li>
							<li>Systems Integration</li>
							<li>Test Automation</li>
							<li>Technical Documentation</li>
							<li>Problem-Solving</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Contact Section -->
	<section id="contact" class="py-20">
		<div class="container mx-auto px-4">
			<h2 class="text-4xl font-bold text-[#1F1F1F] dark:text-[#EDEDE6] mb-8">Contact Me</h2>
			<div class="max-w-2xl mx-auto">
				<!-- Success Message -->
				<div id="success-message" class="hidden mb-6 p-4 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-md">
					<p>Thank you for your message! I'll get back to you soon.</p>
				</div>

				<!-- Error Message -->
				<div id="error-message" class="hidden mb-6 p-4 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-md">
					<p>Sorry, there was an error sending your message. Please try again.</p>
				</div>

				<form 
					class="pageclip-form space-y-6"
					action="https://send.pageclip.co/nM4cSaniUmwHywlkFzhkzr7NkcpIaghz/GenMatcha"
					method="post"
					id="contact-form"
				>
					<div>
						<label for="name" class="block text-sm font-medium text-[#4C4C4C] dark:text-[#B0B0A8]">Name</label>
						<input 
							type="text" 
							id="name" 
							name="name" 
							required
							class="mt-1 block w-full rounded-md border-[#DCDCD0] dark:border-[#3A3E38] shadow-sm focus:border-[#91B77F] dark:focus:border-[#A1C28F] focus:ring-[#91B77F] dark:focus:ring-[#A1C28F] bg-[#F0F0E8] dark:bg-[#262926] text-[#1F1F1F] dark:text-[#EDEDE6]"
						>
					</div>
					<div>
						<label for="email" class="block text-sm font-medium text-[#4C4C4C] dark:text-[#B0B0A8]">Email</label>
						<input 
							type="email" 
							id="email" 
							name="email" 
							required
							class="mt-1 block w-full rounded-md border-[#DCDCD0] dark:border-[#3A3E38] shadow-sm focus:border-[#91B77F] dark:focus:border-[#A1C28F] focus:ring-[#91B77F] dark:focus:ring-[#A1C28F] bg-[#F0F0E8] dark:bg-[#262926] text-[#1F1F1F] dark:text-[#EDEDE6]"
						>
					</div>
					<div>
						<label for="message" class="block text-sm font-medium text-[#4C4C4C] dark:text-[#B0B0A8]">Message</label>
						<textarea 
							id="message" 
							name="message" 
							rows="4" 
							required
							class="mt-1 block w-full rounded-md border-[#DCDCD0] dark:border-[#3A3E38] shadow-sm focus:border-[#91B77F] dark:focus:border-[#A1C28F] focus:ring-[#91B77F] dark:focus:ring-[#A1C28F] bg-[#F0F0E8] dark:bg-[#262926] text-[#1F1F1F] dark:text-[#EDEDE6]"
						></textarea>
					</div>
					<button 
						type="submit" 
						class="pageclip-form__submit w-full px-4 py-2 bg-[#91B77F] dark:bg-[#A1C28F] text-[#1F1F1F] rounded-md hover:bg-[#7DA867] dark:hover:bg-[#8CAF78] focus:outline-none focus:ring-2 focus:ring-[#91B77F] dark:focus:ring-[#A1C28F] focus:ring-offset-2 transition-colors"
					>
						<span class="pageclip-form__submit-text">Send Message</span>
					</button>
				</form>
			</div>
		</div>
	</section>

	<!-- Add Pageclip Script -->
	<script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8"></script>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const form = document.getElementById('contact-form') as HTMLFormElement;
			const successMessage = document.getElementById('success-message');
			const errorMessage = document.getElementById('error-message');

			if (form) {
				form.addEventListener('pageclip:submit', () => {
					// Hide any existing messages
					successMessage?.classList.add('hidden');
					errorMessage?.classList.add('hidden');
				});

				form.addEventListener('pageclip:success', () => {
					// Show success message
					successMessage?.classList.remove('hidden');
					// Reset form
					form.reset();
					// Scroll to success message
					successMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
				});

				form.addEventListener('pageclip:error', () => {
					// Show error message
					errorMessage?.classList.remove('hidden');
					// Scroll to error message
					errorMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
				});
			}

			// Project card click handlers
			const projectCards = document.querySelectorAll('.project-card');
			
			projectCards.forEach(card => {
				const projectId = card.getAttribute('data-project-id');
				
				// Make cards focusable for keyboard navigation
				card.setAttribute('tabindex', '0');
				card.setAttribute('role', 'button');
				card.setAttribute('aria-label', `Open ${projectId} project details`);
				
				// Click handler
				card.addEventListener('click', () => {
					const openModalFunction = (window as any)[`openModal-${projectId}`];
					if (openModalFunction && typeof openModalFunction === 'function') {
						openModalFunction();
					}
				});
				
				// Keyboard handler
				card.addEventListener('keydown', (e: Event) => {
					const keyboardEvent = e as KeyboardEvent;
					if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {
						keyboardEvent.preventDefault();
						(card as HTMLElement).click();
					}
				});
			});
		});
	</script>

	<style>
		/* Container and section positioning */
		.container {
			position: relative;
			z-index: 1;
		}

		section {
			position: relative;
			z-index: 1;
		}

		/* Pageclip form styles */
		.pageclip-form__submit {
			background-color: #91B77F !important;
			color: #1F1F1F !important;
		}

		.pageclip-form__submit:hover {
			background-color: #7DA867 !important;
		}

		.dark .pageclip-form__submit {
			background-color: #A1C28F !important;
		}

		.dark .pageclip-form__submit:hover {
			background-color: #8CAF78 !important;
		}

		/* Background SVG */
		.background-svg {
			position: absolute;
			top: 5rem;
			right: 2rem;
			width: min(300px, 50vw);
			height: auto;
			opacity: 0.1;
			z-index: 0;
			pointer-events: none;
			max-height: calc(100vh - 4rem);
			object-fit: contain;
		}

		@media (max-width: 640px) {
			.background-svg {
				top: 5rem;
				right: 1rem;
				width: min(200px, 50vw);
			}
		}

		.background-svg path {
			fill: #91B77F;
		}

		.dark .background-svg path {
			fill: #A1C28F;
		}

		/* Project card hover animations */
		.project-card {
			position: relative;
			overflow: hidden;
			transition: box-shadow 0.3s ease, transform 0.3s ease;
		}
		
		.project-card:hover {
			box-shadow: 0 0 0 3px #91B77F, 0 10px 25px rgba(0, 0, 0, 0.15);
			transform: scale(1.02);
		}
		
		.dark .project-card:hover {
			box-shadow: 0 0 0 3px #A1C28F, 0 10px 25px rgba(0, 0, 0, 0.3);
			transform: scale(1.02);
		}
		
		.project-card img {
			position: relative;
			z-index: 0;
		}

		/* Enhanced skeleton loading animations */
		.card-image-loading-skeleton {
			background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
			background-size: 200% 100%;
			animation: shimmer 1.5s infinite;
		}

		.dark .card-image-loading-skeleton {
			background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
			background-size: 200% 100%;
			animation: shimmer 1.5s infinite;
		}

		@keyframes shimmer {
			0% {
				background-position: -200% 0;
			}
			100% {
				background-position: 200% 0;
			}
		}
	</style>

	<!-- Background SVG -->
	<img 
		src="/images/portfolio/Genesis.svg" 
		alt="" 
		class="background-svg"
		aria-hidden="true"
	/>
</Layout>
